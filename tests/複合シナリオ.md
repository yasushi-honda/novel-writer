# 複合シナリオテスト

## 概要
このドキュメントは、単一機能のテストでは発見しにくい、機能間の連携や一連の操作フローにおける問題を検出するためのシナリオテストを定義します。ユーザーが実際にアプリケーションを利用する流れを想定し、複数の機能を組み合わせたテストを実施します。

## テスト目的
- 実際のユーザーの利用シーンに沿った操作で、アプリケーションが安定して動作することを確認する。
- 複数の機能を連続して使用した際に、データの不整合や予期せぬエラーが発生しないことを保証する。
- アプリケーション全体の使い勝手（UX）を評価する。

---

## シナリオテスト一覧

### 基本シナリオ (10本)
1.  **SCN001: 初めての物語執筆** (プロジェクト作成 → チュートリアル → キャラ作成 → AI執筆 → TXT出力)
2.  **SCN002: 既存プロジェクトの編集と拡張** (プロジェクトを開く → 世界観追加 → AIで新キャラ登場 → 本文編集 → JSONエクスポート)
3.  **SCN003: AIとのブレインストーミング** (相談モードでプロット相談 → AI提案をプロットに承認 → キャラ設定の深掘り → ナレッジ提案の承認)
4.  **SCN004: 複数分岐の検討** (複数提案ON → 複数展開を生成 → 1つを採用 → Undo → 別の展開を採用)
5.  **SCN005: 設定主導の執筆** (ナレッジとキャラ設定を詳細に作り込む → 執筆モードでナレッジ参照強度「厳格」でシーン生成)
6.  **SCN006: 推敲と整理** (本文執筆後 → アウトラインで章を並べ替え → 全体検索で伏線を確認 → テキスト選択ツールバーで校正)
7.  **SCN007: 視覚ツールの活用** (キャラ作成 → 相関図で関係設定 → タイムラインで主要イベント整理 → プロットボードで構造化)
8.  **SCN008: シンプルモードでの集中執筆** (シンプルモードでプロジェクト作成 → 本文直接入力とAI執筆を併用 → 標準モードに切り替えて設定追加)
9.  **SCN009: バージョン管理と復元** (執筆の節目でスナップショットを複数保存 → 一部を編集 → 古いスナップショットに復元)
10. **SCN010: 作品の完成とHTML書き出し** (執筆完了 → 表示設定を調整 → プレビューで確認 → HTML書き出しモーダルで詳細設定してエクスポート)

### AI連携シナリオ (10本)
11. **SCN011: 隠しコマンドによる高速設定** (本文執筆 → 「〇〇をキャラに追加して」で自動抽出 → 「ここまでの話をまとめて」でプロット自動生成)
12. **SCN012: AI人格の切り替え活用** (プロット相談は「分析的な批評家」→ アイデア出しは「創造的な詩人」→ 執筆中の励ましは「熱狂的なファン」)
13. **SCN013: 文体模倣のテスト** (ユーザーが意図的に癖のある文体（例：体言止め多用）で数パラグラフ執筆 → 文体模倣ONでAIに続きを書かせる)
14. **SCN014: AIアシスタントによるキャラクター深掘り** (既存キャラの編集モーダルでAIアシスタント起動 → 「相談する」で過去のエピソードを考案 → 「設定に反映」で考案した内容をデータに追記)
15. **SCN015: AI立ち絵生成の詳細フロー** (キャラ設定入力 → 「詳細生成」でAIと対話してイメージを固める → 画像生成 → 生成画像を「修正」で微調整 → 最終決定)
16. **SCN016: 設定矛盾の指摘依頼** (意図的に矛盾したナレッジ（例：「魔法は存在しない」「炎の魔法」）を登録 → 相談モードで「設定の矛盾点をチェックして」と指示)
17. **SCN017: AI支援メニューのフル活用** (右パネルの「＋」メニューから「会話シーンの自動生成」「伏線の提案」などを一通り試す)
18. **SCN018: 記憶範囲の比較テスト** (長文の物語を用意 → 記憶範囲を「現在のシーンのみ」と「全文参照」で切り替え、それぞれで序盤の出来事に関する質問をする)
19. **SCN019: AIによるリファクタリング** (ユーザーが書いた冗長な地の文を選択 → テキスト選択ツールバーで「要約して」→ 執筆モードで「この要約を元に、もっと情景が浮かぶように書き直して」と指示)
20. **SCN020: ゼロからAIと世界観構築** (世界観のAIアシスタントを起動 → 「魔法学園都市を作りたい」から対話を始め、AIの提案を元に項目を増やしていく)

### 複合・例外系シナリオ (10本)
21. **SCN021: 大規模プロジェクトの操作** (10万字以上の本文、50以上のキャラクターとナレッジを持つプロジェクトを作成 → 全体検索、相関図表示、AI応答などのパフォーマンスを確認)
22. **SCN022: インポート→編集→エクスポートのサイクル** (JSONをインポート → 内容を大幅に編集 → 再度JSONエクスポート → 元のデータと比較して差分を確認)
23. **SCN023: 操作の中断と再開** (キャラクター編集モーダルで入力中にページをリロード → 再度プロジェクトを開き、編集途中のデータが残っていないことを確認)
24. **SCN024: 複数ウィンドウでの作業** (キャラクター、ナレッジ、アウトラインをそれぞれウィンドウ化 → 画面上に並べて参照しながら執筆を進める)
25. **SCN025: 設定削除の影響範囲確認** (物語のキーキャラクターを削除 → 確認ダイアログ後、相関図、タイムライン、本文などからそのキャラクターへの言及がどうなるか確認)
26. **SCN026: ネットワーク不安定時のAI利用** (ブラウザの開発者ツールでネットワークを「低速3G」に設定 → AIに指示を送信し、タイムアウトエラーが正常に表示されるか確認)
27. **SCN027: 特殊文字と多言語入力** (プロジェクト名、キャラクター名、本文に絵文字、特殊記号、多言語（英語、中国語など）を入力 → 保存、表示、エクスポートで文字化けやエラーが発生しないか確認)
28. **SCN028: 全削除からの復旧** (本文を全て削除 → キャラを全て削除 → 設定を全て削除 → Undoを繰り返し押し、プロジェクトが元の状態まで復元できるか確認)
29. **SCN029: リアルタイム変更とAI応答** (AIが応答生成中に、裏でキャラクターの設定を変更する → 生成された本文が変更前の設定に基づいていることを確認)
30. **SCN030: ヘルプとチュートリアルの巡回** (アプリ内の全ての「？」アイコンをクリック → ヘルプモーダルやチュートリアルが正常に起動し、内容が適切か確認)

---
