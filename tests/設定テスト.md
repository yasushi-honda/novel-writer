# 設定機能テスト設計書

## 概要
このドキュメントは、「小説らいたー」の各種設定機能に関するテストケースを定義します。AIアシスタントの挙動を制御する「AI設定」、執筆画面の見た目を変更する「表示設定」、プロジェクト全体を検索する「全体検索」などが対象です。

## テスト目的
- 各種設定の変更が、アプリケーションの挙動や表示に正しく、即座に反映されることを保証する。
- 設定がプロジェクトごとに正しく保存され、リロード後も維持されることを確認する。
- グローバル機能（検索、コマンドパレット）が正常に動作することを確認する。

## 前提条件
- テスト対象のプロジェクトがメイン画面で開かれていること。

---

## テスト項目一覧

| 機能分類 | テスト項目 |
| :--- | :--- |
| **AI設定モーダル** | 全てのAI設定項目の変更と保存、反映の確認 |
| **プロフィール設定** | ユーザーアイコンのアップロード、ユーザーネームの変更 |
| **表示設定** | テーマ、フォント、文字サイズの変更と反映 |
| **パネル入れ替え** | 左右サイドバーの表示位置入れ替え機能 |
| **全体検索モーダル** | キーワード検索、結果表示、結果へのジャンプ機能 |
| **コマンドパレット** | コマンドの検索と実行 |

---

## 詳細テストケース

### AI設定モーダル

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-SET-AI-001** | AI設定の変更と保存 | 1. 左パネルから「設定」モーダルを開く<br>2. 「AIアシスタントの口調」を「親しい友人」に変更<br>3. 「生成する文章量」のスライダーを動かす<br>4. 「保存」ボタンを押す | 1. 設定モーダルが開く<br>2. 変更がUI上で反映される<br>3. スライダーの値が変更される<br>4. モーダルが閉じ、設定が保存される |
| **TC-SET-AI-002** | 変更の反映確認 | 1. 上記 TC-SET-AI-001 を実施後、再度「設定」モーダルを開く<br>2. 相談モードでAIに話しかける | 1. 変更した「親しい友人」「文章量」が維持されている<br>2. AIの応答が「親しい友人」の口調になる |
| **TC-SET-AI-003** | 未保存警告 | 1. 「設定」モーダルで項目を変更<br>2. 保存せずに「×」ボタンで閉じようとする<br>3. 「保存せずに閉じる」を選択 | 1. 確認ポップオーバーが表示される<br>2. モーダルが閉じ、変更は保存されない |

### プロフィール設定

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-SET-PRO-001** | ユーザーアイコン変更 | 1. 「設定」モーダルを開く<br>2. プロフィール設定のアイコン部分をクリックし、画像ファイルをアップロード | 1. アイコンがアップロードした画像に変わる<br>2. 右パネルのチャット欄のユーザーアイコンも同様に変わる |
| **TC-SET-PRO-002** | ユーザーネーム変更 | 1. 「設定」モーダルでユーザーネームを入力し保存<br>2. 相談モードでAIに話しかける | AIが設定したユーザーネームで呼びかけてくることがある。 |

### 表示設定

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-SET-DIS-001** | テーマ変更 | 1. ヘッダー「表示」→「表示設定」を開く<br>2. カラーテーマを「セピア」に変更 | 中央パネル（本文エリア）の背景と文字色がセピア調に即時変更される。 |
| **TC-SET-DIS-002** | フォント変更 | 1. 表示設定でフォントを「明朝体」に変更 | 本文エリアのフォントが明朝体（Serif系）に即時変更される。 |
| **TC-SET-DIS-003** | 設定の永続化 | 1. 表示設定を変更後、ページをリロードする | 変更した表示設定（テーマ、フォント、文字サイズ）が維持されている。 |
| **TC-SET-DIS-004** | パネル入れ替え | 1. AI設定モーダルを開き、「表示設定」セクションの「左パネルと右パネルを入れ替える」をONにする | 1. 左パネルと右パネルの表示位置が入れ替わる。<br>2. リロード後も入れ替わった状態が維持される。 |

### グローバル機能

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-SET-GL-001** | 全体検索 (本文) | 1. `Ctrl/⌘+F` で全体検索モーダルを開く<br>2. 本文に存在するキーワードを入力<br>3. 表示された本文の結果をクリック | 1. 検索モーダルが開く<br>2. 検索結果が表示される<br>3. モーダルが閉じ、中央パネルが該当箇所にスクロールし、一時的にハイライトされる |
| **TC-SET-GL-002** | 全体検索 (キャラクター) | 1. 全体検索モーダルでキャラクター名を入力<br>2. 表示されたキャラクターの結果をクリック | 1. 検索結果が表示される<br>2. モーダルが閉じ、該当キャラクターの編集モーダルが開く |
| **TC-SET-GL-003** | コマンドパレット | 1. `Ctrl/⌘+K` でコマンドパレットを開く<br>2. 「相関図」と入力し、Enterキーを押す | 1. コマンドパレットが開く<br>2. 相関図モーダルが開く |

---
