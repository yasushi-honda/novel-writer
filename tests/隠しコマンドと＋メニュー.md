# 隠しコマンド・便利機能テスト設計書

## 概要
このドキュメントは、通常のボタン操作以外でアプリケーションの機能を呼び出す、いわゆる「隠しコマンド」や「便利機能」に関するテストケースを定義します。キーボードショートカット、コマンドパレット、AIへの特殊なプロンプト、右パネルのAI支援メニューなどが対象です。

## テスト目的
- ユーザーの作業効率を向上させるための各種機能が、仕様通りに正確に動作することを保証する。
- ショートカットキーが他の機能やブラウザのデフォルト動作と競合しないことを確認する。
- AIが特殊なプロンプトを正しく解釈し、期待されるアクションを実行することを確認する。

## 前提条件
- 標準モードでプロジェクトが開かれていること。

---

## テスト項目一覧

| 機能分類 | テスト項目 |
| :--- | :--- |
| **キーボードショートカット** | グローバルショートカット、編集ショートカットの動作確認 |
| **コマンドパレット** | コマンドの検索と実行、モーダル呼び出し |
| **AIへの隠しコマンド** | キャラクター自動追加、プロット自動生成 |
| **右パネルAI支援メニュー** | 各テンプレートプロンプトの挿入とAIの応答 |
| **テキスト選択ツールバー** | 各アクション（校正、要約など）の実行 |

---

## 詳細テストケース

### キーボードショートカット

| テストケースID | 対象機能 | ショートカット | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- | :--- |
| **TC-CMD-KEY-001** | コマンドパレット | `Ctrl/⌘ + K` | メイン画面でキーを押す | コマンドパレットが開く。 |
| **TC-CMD-KEY-002** | 全体検索 | `Ctrl/⌘ + F` | メイン画面でキーを押す | 全体検索モーダルが開く。 |
| **TC-CMD-KEY-003** | パネル開閉 | `Ctrl/⌘ + [`<br>`Ctrl/⌘ + ]` | メイン画面でキーを押す | それぞれ左、右のサイドパネルが開閉する。 |
| **TC-CMD-KEY-004** | AIモード切替 | `Ctrl/⌘ + Shift + M` | メイン画面でキーを押す | 相談モードと執筆モードが切り替わる。 |
| **TC-CMD-KEY-005** | 新規作成 | `Ctrl/⌘ + Alt + C` | メイン画面でキーを押す | 新規キャラクター作成モーダルが開く。（W, Kも同様） |
| **TC-CMD-KEY-006** | モーダル保存 | `Ctrl/⌘ + S` | キャラクター編集モーダルを開き、何か入力中にキーを押す | モーダルが保存され、閉じる。 |
| **TC-CMD-KEY-007** | 本文編集 (ルビ) | `Ctrl/⌘ + R` | 本文編集モードでテキストを選択し、キーを押す | 選択したテキストがルビ記法 `{テキスト|}` に変換される。 |

### コマンドパレット

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-CMD-PLT-001** | コマンド検索 | 1. `Ctrl/⌘+K`でパレットを開く<br>2. 「そうかん」と入力 | 「相関図を開く」コマンドが候補として表示される。 |
| **TC-CMD-PLT-002** | コマンド実行 | 1. パレットで「タイムラインを開く」を選択し、Enterキーを押す | タイムラインモーダルが開く。 |
| **TC-CMD-PLT-003** | モード切替実行 | 1. パレットで「AIモード切替」を実行する | 右パネルのAIモードが切り替わる。 |

### AIへの隠しコマンド

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-CMD-AI-001** | キャラクター自動追加 | 1. 本文に未登録のキャラクター「アキラ」の描写を書く<br>2. 相談モードで「アキラをキャラクターに追加して」と送信 | キャラクター設定モーダルが開き、「名前：アキラ」や本文から抽出された特徴が自動入力されている。 |
| **TC-CMD-AI-002** | プロット自動生成 | 1. 本文がある程度進んだ状態で、相談モードで「ここまでの話をまとめて」と送信 | AIが要約を返信すると同時に、「プロット提案」が表示される。承認するとプロットボードにカードが追加される。 |
| **TC-CMD-AI-003** | プロット生成 (キーワード) | 相談モードで「次の章の**プロット**を考えて」「全体の**構成案**をください」「**あらすじ**を作って」など、キーワードを含む指示を送る | いずれの場合も「プロット提案」が表示される。 |

### 右パネルAI支援メニュー (＋ボタン)

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-CMD-MENU-001**| メニュー表示 | 右パネル入力欄の「＋」ボタンを押す | 「執筆補助」「アイデア出し」などのカテゴリが表示される。 |
| **TC-CMD-MENU-002**| テンプレート挿入 | 1. メニューから「執筆補助」→「会話シーンの自動生成」を選択 | `[キャラクターA]と[キャラクターB]が[話題]について会話しているシーンを書いてください。`というテンプレートが入力欄に挿入される。 |
| **TC-CMD-MENU-003**| テンプレートを用いた指示| 1. 挿入されたテンプレートの`[ ]`内を具体的な名前に書き換えて送信 | AIがテンプレートの意図を汲み取り、指定されたキャラクターの会話シーンを生成する。 |

---
