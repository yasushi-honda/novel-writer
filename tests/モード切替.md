# モード切替テスト設計書

## 概要
このドキュメントは、「小説らいたー」に搭載されている主要なモード切替機能に関するテストケースを定義します。AIの挙動を根本的に変える「執筆モード / 相談モード」と、UIの複雑さを変える「標準モード / シンプルモード」の2つの軸で検証します。

## テスト目的
- 各モードの切替が正しく行われ、UIとアプリケーションの挙動が仕様通りに変化することを保証する。
- モードの組み合わせによって、予期せぬ不具合が発生しないことを確認する。

## 前提条件
- テスト対象のプロジェクトがメイン画面で開かれていること。

---

## テスト項目一覧

| 機能分類 | テスト項目 |
| :--- | :--- |
| **AIモード (執筆/相談)** | モード切替、各モードでのAIの応答、UIの表示変化 |
| **UIモード (標準/シンプル)** | モード切替、各モードでのUI表示、機能制限 |
| **組み合わせテスト** | 4つのモードの組み合わせ（標準×執筆, 標準×相談, etc.）での動作確認 |

---

## 詳細テストケース

### AIモード (執筆/相談)

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-MODE-AI-001** | 相談モードへの切替 | 1. 右パネルで「相談モード」のラジオボタンを選択<br>2. AIに「キャラクターのアイデアをください」と送信 | 1. ラジオボタンの選択が切り替わる<br>2. AIがアイデアを提案する**文章のみ**を返す<br>3. **中央パネルに本文は追加されない** |
| **TC-MODE-AI-002** | 執筆モードへの切替 | 1. 右パネルで「執筆モード」のラジオボタンを選択<br>2. AIに「物語の続きを書いて」と送信 | 1. ラジオボタンの選択が切り替わる<br>2. AIが物語の続きを生成し、**中央パネルに本文が追加される** |
| **TC-MODE-AI-003** | モード切替ショートカット | `Ctrl/⌘+Shift+M` を押す | 相談モードと執筆モードがトグルで切り替わる。 |
| **TC-MODE-AI-004** | UI表示の変化 | 1. 相談モードに切り替える<br>2. 執筆モードに切り替える | 1. ユーザーのチャット吹き出しがライムグリーン系になる。「複数提案」トグルが無効化される。<br>2. ユーザーのチャット吹き出しがブルー系になる。「複数提案」トグルが有効化される。 |
| **TC-MODE-AI-005** | 執筆モードでの相談 | 1. 執筆モードで「次の展開はどうしたらいい？」と相談系の指示を送る | AIは相談に乗るような返信（`replyText`）をしつつも、指示内容を解釈して何らかの本文（`newChunk`）を生成しようと試みる。 |

### UIモード (標準/シンプル)

| テストケースID | 対象機能 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- |
| **TC-MODE-UI-001** | シンプルモードへの切替 | ヘッダーの「シンプルモードへ」ボタンを押す | 1. 左パネルの表示が「キャラクター」「世界観」「設定」のみになる<br>2. 右パネル（AIアシスタント）が非表示になる<br>3. ヘッダーのボタンが「標準モードへ」に変わる |
| **TC-MODE-UI-002** | 標準モードへの切替 | ヘッダーの「標準モードへ」ボタンを押す | 1. 左パネルに全ての機能（ナレッジ、プロットなど）が表示される<br>2. 右パネルが表示される<br>3. ヘッダーのボタンが「シンプルモードへ」に変わる |
| **TC-MODE-UI-003** | シンプルモードでの機能制限 | シンプルモードの状態で、`Ctrl/⌘+K` でコマンドパレットを開き、「タイムライン」を実行しようとする | コマンドパレット自体は開けるが、タイムラインなどシンプルモードで非表示になっている機能は実行できないか、実行しても何も起こらない。 |
| **TC-MODE-UI-004** | モード状態の永続化 | 1. シンプルモードに切り替える<br>2. ページをリロードするか、一度プロジェクト選択画面に戻って再度開く | シンプルモードの状態が維持されている。 |

### 組み合わせテスト

| テストケースID | 対象機能 | 設定 | 操作手順 | 期待結果 |
| :--- | :--- | :--- | :--- | :--- |
| **TC-MODE-CMB-001** | 標準モード × 相談モード | ・UI: 標準<br>・AI: 相談 | AIに指示を送信する | 右パネルでAIとの相談ができ、左パネルで詳細な設定（ナレッジ、プロット等）を参照・編集できる。本文は生成されない。 |
| **TC-MODE-CMB-002** | 標準モード × 執筆モード | ・UI: 標準<br>・AI: 執筆 | AIに指示を送信する | 右パネルでAIに執筆を指示でき、結果が中央パネルに反映される。左パネルで詳細設定を参照できる。 |
| **TC-MODE-CMB-003** | シンプルモード × AI | ・UI: シンプル | 1. AIに何か指示を送ろうとする | 1. 右パネルが非表示のため、AIへの指示送信ができない。<br>（将来的にシンプルモードでもAIが使えるようになった場合はテストケースの修正が必要） |

---
