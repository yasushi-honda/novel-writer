# 7. UIリファレンスとサイトマップ

このページでは、アプリケーション内の操作可能な全てのUI要素と、各機能へどのようにアクセスできるかのサイトマップをまとめています。

## サイトマップ

- **プロジェクト選択画面**
  - → **新規プロジェクト作成**
    - → シンプルモード or 標準モード選択
    - → タイトル入力 → `作成`ボタン → **メイン画面**
  - → **プロジェクトをインポート**
    - → ファイル選択 → **メイン画面**
  - → **既存プロジェクト一覧**
    - → `開く`ボタン → **メイン画面**
- **メイン画面**
  - **ヘッダー**
    - → `プロジェクト一覧へ`ボタン → **プロジェクト選択画面**
    - → `エクスポート`ボタン → プロジェクトファイル(.json)のダウンロード
    - → タイトル部分クリック → タイトル編集モード
    - → `検索`ボタン ( `Ctrl+F` ) → **全体検索モーダル**
    - → `表示設定`ボタン → **表示設定ポップオーバー**
    - → `標準モードへ` / `シンプルモードへ`ボタン → モード切り替え
    - → `プレビュー`ボタン → **プレビューモーダル**
    - → `.txtで出力`ボタン → テキストファイル(.txt)のダウンロード
    - → `.htmlで出力`ボタン → **HTML書き出しモーダル**
    - → サイドバー開閉ボタン ( `Ctrl+[` / `Ctrl+]` )
  - **左サイドバー (標準モードのみ)**
    - → タブ切り替えドロップダウン (`設定ライブラリ` / `アウトライン` / `バージョン管理`)
      - **設定ライブラリ**
        - → `設定`ボタン → **設定モーダル**
        - → `キャラクター`横の `+` ボタン → **キャラクター設定モーダル (新規作成)**
        - → 各キャラクターカードの`編集`ボタン → **キャラクター設定モーダル (編集)**
        - → `世界観`横の `+` ボタン → **世界観設定モーダル (新規作成)**
        - → 各世界観カードの`編集`ボタン → **世界観設定モーダル (編集)**
        - → `相関図を表示`ボタン → **相関図モーダル**
        - → `タイムラインボードを開く`ボタン → **タイムラインモーダル**
        - → `ジェネレーターを開く`ボタン → **固有名詞生成モーダル**
        - → `ナレッジベース`横の `+` ボタン → **ナレッジ設定モーダル (新規作成)**
        - → `すべて表示して検索`ボタン → **ナレッジベース一覧モーダル**
        - → 各ナレッジカードの`編集`ボタン → **ナレッジ設定モーダル (編集)**
        - → `プロットボード`横の `+` ボタン → **プロットボードモーダル (新規作成)**
        - → 各プロットカードの`編集`ボタン → **プロットボードモーダル (編集)**
      - **アウトライン**
        - → 各章のタイトル → 本文の該当箇所へスクロール
        - → 各章の`設定`ボタン → **章設定モーダル**
        - → `新しい章を追加`ボタン → 新しい章を本文末尾に追加
      - **バージョン管理**
        - → `スナップショットを保存`ボタン → **スナップショット作成モーダル**
        - → `スナップショットを管理`ボタン → **スナップショット管理モーダル**
  - **中央パネル (本文)**
    - → 各段落にマウスオーバー → `編集`ボタン → 編集モードに切り替え
    - → 各段落にマウスオーバー → `ピン留め`ボタン → 段落のピン留め/解除
    - → `本文を直接入力`ヘッダー → テキストエリアの表示/非表示
  - **右サイドバー (AIアシスタント)**
    - → `ヘルプ`ボタン → **一般ヘルプモーダル**
    - → `元に戻す`/`やり直す`ボタン ( `Ctrl+Z` / `Ctrl+Y` ) → 操作のUndo/Redo
    - → `相談モード`/`執筆モード`ラジオボタン → AIのモード切り替え
    - → `複数提案`トグルスイッチ → 複数展開提案機能のON/OFF
    - → `AIへの指示を入力...`テキストエリア → AIへの指示入力
    - → `送信`ボタン ( `Ctrl+Enter` ) → AIへメッセージを送信

---

## UI要素一覧

### プロジェクト選択画面

- **シンプルモード / 標準モード ボタン**: 新規作成するプロジェクトのモードを選択します。
- **物語のタイトル 入力欄**: 新しいプロジェクトのタイトルを入力します。
- **作成 ボタン**: 入力されたタイトルで新しいプロジェクトを作成し、執筆画面に移動します。
- **プロジェクトをインポート ボタン**: ローカルのプロジェクトファイル(`.json`)を選択して読み込みます。
- **既存の物語リスト**:
  - **開く ボタン**: 対応するプロジェクトを開きます。
  - **ゴミ箱アイコン ボタン**: 対応するプロジェクトを削除します。

### メイン画面：ヘッダー

- **← プロジェクト一覧へ ボタン**: プロジェクト選択画面に戻ります。
- **エクスポート ボタン**: 現在のプロジェクトを`.json`ファイルとしてダウンロードします。
- **プロジェクトタイトル**: クリックするとタイトルを直接編集できます。
- **検索 ボタン**: プロジェクト全体を対象とした検索モーダルを開きます。
- **表示設定 ボタン**: テーマ、フォント、文字サイズを変更するポップオーバーを開きます。
- **標準モードへ / シンプルモードへ ボタン**: プロジェクトのモードを切り替えます。
- **プレビュー ボタン**: 小説本文のプレビューモーダルを開きます。
- **.txtで出力 ボタン**: 小説本文をプレーンテキストファイルとしてダウンロードします。
- **.htmlで出力 ボタン**: 小説をHTMLファイルとして書き出すための設定モーダルを開きます。
- **パネル開閉ボタン (左/右)**: 対応するサイドバーの表示/非表示を切り替えます。

### メイン画面：左サイドバー

#### 全般
- **タブ切り替えドロップダウン**: `設定ライブラリ`, `アウトライン`, `バージョン管理`の表示を切り替えます。

#### 設定ライブラリ タブ
- **設定 ボタン**: AIの挙動やプロフィールアイコンなどを設定するモーダルを開きます。
- **キャラクター/世界観/ナレッジ/プロット 横の `+` ボタン**: 各種設定項目の新規作成モーダルを開きます。
- **各設定カード**:
  - **編集ボタン**: 編集モーダルを開きます。
  - **ゴミ箱ボタン**: 項目を削除します。
- **相関図を表示 ボタン**: キャラクター相関図モーダルを開きます。
- **タイムラインボードを開く ボタン**: タイムラインモーダルを開きます。
- **ジェネレーターを開く ボタン**: 固有名詞生成モーダルを開きます。
- **すべて表示して検索 (ナレッジ) ボタン**: ナレッジベースの全体一覧モーダルを開きます。
- **すべて表示する (プロット) ボタン**: プロットボードモーダルを開きます。
- **ナレッジカードのピン留めボタン**: ナレッジ項目をピン留め/解除します。

#### アウトライン タブ
- **各章のドラッグハンドル**: ドラッグ＆ドロップで章の順番を並べ替えます。
- **各章のタイトル ボタン**: 本文の該当箇所にスクロールします。
- **各章の設定ボタン**: 章のタイトルやメモを編集するモーダルを開きます。
- **各章のゴミ箱ボタン**: 章全体を削除します。
- **新しい章を追加 ボタン**: 本文の末尾に新しい章を追加します。

#### バージョン管理 タブ
- **スナップショットを保存 ボタン**: 現在のプロジェクト状態を保存するモーダルを開きます。
- **スナップショットを管理 ボタン**: 保存したスナップショットの一覧を表示し、復元や削除を行うモーダルを開きます。

### メイン画面：中央パネル (本文エリア)

- **各段落**:
  - **編集ボタン (マウスオーバーで表示)**: 段落のテキストを編集するモードに切り替えます。
  - **ピン留めボタン (マウスオーバーで表示)**: 段落をピン留め/解除します。
- **編集モードのツールバー**:
  - **太字/下線/見出し/ルビ/文字色 ボタン**: 選択したテキストにMarkdown装飾を適用します。
  - **キャンセル/保存 ボタン**: 編集内容を破棄または保存します。
- **本文を直接入力 ヘッダー**: クリックすると、下部のテキスト入力エリアの表示/非表示を切り替えます。
- **本文入力テキストエリア**: 新しい段落を直接入力します。
- **本文に追加 ボタン**: テキストエリアの内容を小説本文の末尾に追加します。

### メイン画面：右サイドバー (AIアシスタント)

- **ヘルプ (?) ボタン**: アプリの基本的な使い方に関するヘルプモーダルを開きます。
- **元に戻す/やり直す ボタン**: プロジェクト全体の操作（本文編集、設定変更など）を元に戻したり、やり直したりします。
- **相談モード / 執筆モード ラジオボタン**: AIの動作モードを切り替えます。
- **複数提案 トグルスイッチ**: 執筆モード時にAIが複数の展開案を提案する機能のON/OFFを切り替えます。
- **AIへの指示を入力... テキストエリア**: AIに送信するメッセージを入力します。
- **送信ボタン**: 入力したメッセージをAIに送信します。
- **AIからの提案 (ナレッジ/プロット)**:
  - **承認 ボタン**: 提案された内容をプロジェクトに保存します。
  - **却下 ボタン**: 提案を破棄します。
- **AIからの複数展開の提案**:
  - **この展開を採用 ボタン**: 提案された本文を小説に追加します。

### 各種モーダルウィンドウ

モーダル内のUI要素は多岐にわたりますが、主な操作は以下の通りです。

- **入力欄 (テキスト, テキストエリア, 数値, 色)**: 各種設定値を入力します。
- **セレクトボックス/ラジオボタン/ボタン**: 設定項目を選択します。
- **保存/適用/書き出す ボタン**: モーダルでの変更を保存し、モーダルを閉じます。
- **キャンセル/閉じる ボタン**: 変更を破棄してモーダルを閉じます。
- **タブ**: 関連する設定項目をグループ化した表示を切り替えます (例: キャラクター設定モーダルの「プロフィール」「性格・内面」など)。
- **項目追加/削除ボタン**: リスト形式の設定（例: 世界観のカスタム項目、キャラクターの特徴リスト）で行を追加・削除します。
- **AIアシスタント起動ボタン**: AIと対話しながら設定を生成する専用モーダルを開きます。
- **画像アップロードエリア**: キャラクターの立ち絵などをローカルファイルからアップロードします。
- **ドラッグ＆ドロップエリア (相関図, タイムライン, プロットボード)**: 各要素をドラッグして位置や順序を自由に変更します。